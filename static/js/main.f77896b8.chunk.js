(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(295)},142:function(e,t,a){},148:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){e.exports=a.p+"static/media/morikin-sh.e28ca059.jpg"},189:function(e,t,a){},190:function(e,t,a){},196:function(e,t){},198:function(e,t){},238:function(e,t){},239:function(e,t){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(53),i=a.n(o),s=(a(142),a(9)),l=a(3),c=a(27),u=a(2),m="SET_CURRENT_USER",d={isLoggedIn:!1},p={popup:!1,message:null,code:null},h=a(29);function f(e,t,a){var n=a;for(var r in n){if(r===e.toString()){n[r].following=t;break}}return n}var g={loading:!1,data:[],isLast:!1,likes:null},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,a=arguments.length>2?arguments[2]:void 0;if(e!==a.context)return t;switch(a.type){case"FETCHING_MESSAGES":return Object(u.a)({},t,{loading:!0});case"UPDATE_MESSAGES":return Object(u.a)({},t,{loading:!1,data:t.data.concat(Object(h.a)(a.messages))});case"POST_MESSAGE":return Object(u.a)({},t,{data:[Object(u.a)({},a.message,{likedBy:0})].concat(Object(h.a)(t.data))});case"LOAD_MESSAGES":return Object(u.a)({},t,{loading:!1,isLast:!1,data:Object(h.a)(a.messages)});case"ANIMATE_REMOVE_MESSAGE":var n=function(e,t){var a=t.findIndex(function(t){return t._id===e.id}),n=t;for(var r in n)if(r===a.toString()){n[r].isDeleted=!0;break}return n}(a,t.data);return Object(u.a)({},t,{loading:!1,data:Object(h.a)(n)});case"REMOVE_MESSAGE":return Object(u.a)({},t,{loading:!1,data:t.data.filter(function(e){return e._id!==a.id})});case"LIKE_MESSAGE":var r=function(e,t){var a=t.findIndex(function(t){return t._id===e._id}),n=t;for(var r in n)if(r===a.toString()){n[r].isLiked=e.isLiked,n[r].likedBy=e.likedBy;break}return n}(a.message,t.data);return Object(u.a)({},t,{loading:!1,data:Object(h.a)(r)});case"LAST_MESSAGE":return Object(u.a)({},t,{isLast:!0});case"LOAD_MSG_LIKES":return Object(u.a)({},t,{likes:a.users});case"UPDATE_LIKE_LIST":var o=f(a.id,a.update,t.likes);return Object(u.a)({},t,{likes:Object(h.a)(o)});default:return t}},b={loading:!1,user:{}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,a=arguments.length>2?arguments[2]:void 0;if(e!==a.context)return t;switch(a.type){case"FETCHING_PROFILE":return Object(u.a)({},t,{loading:!0,user:Object(u.a)({},t.user)});case"LOAD_USER_PROFILE":return Object(u.a)({},t,{loading:!1,user:Object(u.a)({},a.user)});case"UPDATE_USER_PROFILE":return Object(u.a)({},t,{loading:!1,user:Object(u.a)({},t.user,a.update)});default:return t}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{profileHide:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"ANIMATE_ENTER":return{enter:!0};case"ANIMATE_ENTER_REVERSE":return{enterReverse:!0};case"ANIMATE_EXIT":return{exit:!0};case"ANIMATE_EXIT_REVERSE":return{exitReverse:!0};case"ANIMATE_REMOVE":return{};case"ANIMATE_PROFILE":return{profileHide:!e.profileHide};default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER_FOLLOW":return t.users;case"UPDATE_FOLLOW_LIST":var a=f(t.id,t.update,e);return Object(h.a)(a);case"CLEAR_FOLLOW":return[];default:return e}},w=a(16),k={popUp:{display:!1,method:null,title:null,url:null},follow:{display:!1,animateOut:!1},newMessage:{display:!1},likes:{display:!1,title:null,url:null},loading:!1,isMobile:window.innerWidth<=500,context:null,sidebarShow:!1,editProfilePage:"info"},N=Object(c.c)({myProfile:Object(c.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)({},e,{isLoggedIn:!!Object.keys(t.user).length},t.user);case"UPDATE_CURRENT_USER":return Object(u.a)({},e,t.user);default:return e}},profile:v.bind(null,"myProfile"),messages:E.bind(null,"myProfile")}),errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POPUP_SHOW":return Object(u.a)({},e,{popup:!0});case"POPUP_HIDE":return p;case"ADD_ERROR":return Object(u.a)({},e,{message:t.data.message,code:t.data.code,method:t.method});case"ADD_POPUP_BUTTON":return Object(u.a)({},e,{func:t.func,args:t.args,text:t.text});case"REMOVE_ERROR":return p;default:return e}},dashboard:Object(c.c)({profile:v.bind(null,"dashboard"),messages:E.bind(null,"dashboard")}),profile:Object(c.c)({profile:v.bind(null,"profile"),messages:E.bind(null,"profile")}),follow:O,animate:y,discover:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DISCOVER_USERS":return Object(u.a)({},e,{users:Object(h.a)(t.users)});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_FOLLOW":return Object(u.a)({},e,{follow:{display:!0,title:t.title,url:t.url}});case"CLOSE_FOLLOW":return Object(u.a)({},e,{follow:{display:!1,title:null,url:null}});case"SHOW_LIKES":return Object(u.a)({},e,{likes:{display:!0,title:t.title,url:t.url}});case"CLOSE_LIKES":return Object(u.a)({},e,{likes:{display:!1,title:null,url:null}});case"ANIMATE_CLOSE":return Object(u.a)({},e,Object(w.a)({},t.select,Object(u.a)({},e[t.select],{animateOut:!0})));case"SHOW_NEW_MESSAGE":return Object(u.a)({},e,{newMessage:{display:!e.newMessage.display}});case"IS_LOADING":return Object(u.a)({},e,{loading:!0});case"IS_LOADED":return Object(u.a)({},e,{loading:!1});case"WINDOW_RESIZE":return Object(u.a)({},e,{isMobile:t.size});case"SET_CONTEXT":return Object(u.a)({},e,{context:t.context});case"SHOW_SIDEBAR":return Object(u.a)({},e,{sidebarShow:!0});case"HIDE_SIDEBAR":return Object(u.a)({},e,{sidebarShow:!1});case"EDIT_PROFILE_PAGE":return Object(u.a)({},e,{editProfilePage:t.page});case"CLEAR_ALL":return Object(u.a)({},k,{loading:e.loading,isMobile:e.isMobile,context:e.context,sidebarShow:e.sidebarShow});default:return e}}}),C=function(e,t){return"USER_LOGOUT"===t.type&&(e=void 0),N(e,t)},S=a(134);var j=a(33),x=a(10),M=a(11),R=a(13),L=a(12),_=a(6),P=a(14),I=a(76),A=a.n(I),U=(a(148),a(77)),T=a.n(U);function D(){var e=Math.floor(255*Math.random()),t=Math.floor(255*Math.random()),a=Math.floor(255*Math.random());return"rgb(".concat(e,", ").concat(t,", ").concat(a,")")}var W=function(e){return e.loading?r.a.createElement("div",{className:"img-wrapper"},r.a.createElement("button",{className:"img-link"},r.a.createElement(T.a,{className:"profile-picture",type:U.ICON_TYPE.TAIL_SPIN,size:50,strokeWidth:4,strokeColor:"#ae27e8",duration:800}))):r.a.createElement("div",{className:"img-wrapper"},r.a.createElement(s.b,{className:"img-link",to:"/u/".concat(e.username)},r.a.createElement("object",{onLoad:function(t){return e.profileImg&&(t.target.style.opacity=1)},className:"profile-picture",alt:"".concat(e.username,"'s profile "),data:e.profileImg?e.profileImg:a(82),type:"image/jpg",style:{boxShadow:"0px 0px 2px 0px ".concat(e.profileColor?e.profileColor:D()),opacity:.3}},r.a.createElement("img",{alt:"",className:"profile-picture no-img",src:a(82)}))))},H=function(e){var t=getComputedStyle(document.body).getPropertyValue("--purple");return r.a.createElement("svg",{className:"logo-svg",style:e.style,width:"100%",height:"100%",viewBox:"0 0 901.000000 902.000000",preserveAspectRatio:"xMidYMid meet"},r.a.createElement("g",{id:"layer2"},r.a.createElement("ellipse",{ry:"407.14636",rx:"406.69498",cy:"451",cx:"450.5",id:"path48",style:{fill:"none",stroke:e.color||t,strokeWidth:40,strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1,strokeDashoffset:0,paintOrder:"fill stroke"}})),r.a.createElement("g",{id:"layer6"},r.a.createElement("path",{id:"path4656-4",d:"m 294.17808,646.93872 c 0,-41.03868 -0.6993,-73.97942 -1.56344,-73.64645 -0.85988,0.33134 -7.97255,9.1418 -15.80591,19.57881 -18.19006,24.23605 -49.46841,56.63201 -70.15796,72.66476 l -16.13995,12.50717 -8.60937,-18.2353 c -4.73515,-10.02942 -8.70032,-18.68596 -8.81146,-19.23675 -0.11116,-0.55078 6.83651,-5.91245 15.43928,-11.91477 18.56815,-12.95543 46.67732,-39.49945 65.17378,-61.54482 11.89912,-14.18222 35.05321,-46.6629 35.05321,-49.17285 0,-0.53514 -21.55176,-0.97297 -47.89279,-0.97297 h -47.89276 v -18.97638 -18.97639 h 50.60368 50.60369 V 447.3855 415.7582 h 20.78366 20.78365 v 31.62731 31.62728 h 47.89276 47.89278 v 18.97639 18.97638 h -47.89278 c -51.15774,0 -52.78673,0.31632 -43.8264,8.51036 2.23651,2.04523 23.6958,18.38053 47.68731,36.30065 23.99152,17.92012 44.15439,33.44516 44.80636,34.50009 0.66599,1.07762 -5.28873,6.71839 -13.5897,12.87316 -12.89626,9.562 -15.14671,10.64103 -17.69724,8.48524 -1.60717,-1.3584 -16.74778,-14.13057 -33.64579,-28.38257 l -30.72366,-25.91274 -0.47082,78.9239 -0.47081,78.9239 h -20.76466 -20.76466 z",style:{fill:e.color||t,fillOpacity:1,stroke:e.color||t,strokeWidth:1.80727434,strokeOpacity:1}}),r.a.createElement("path",{id:"path4658-0",d:"m 552.61831,648.89657 c 0,-43.97324 -0.69562,-77.71279 -1.60222,-77.71279 -0.88123,0 -6.19725,5.61648 -11.81338,12.48108 -22.93912,28.03843 -79.34477,78.51139 -103.63539,92.73511 l -5.30288,3.10518 -12.77392,-15.0017 -12.77391,-15.0017 5.72625,-3.29467 c 25.97131,-14.94295 55.76256,-37.76377 81.40053,-62.35476 22.94087,-22.00404 54.16349,-61.4497 51.08016,-64.53303 -0.58888,-0.58888 -20.60685,-1.47348 -44.48438,-1.96576 l -43.41367,-0.89507 v -18.72284 -18.72284 h 48.7964 48.79641 V 447.3855 415.7582 h 19.88001 19.88003 v 31.62731 31.62728 h 57.83276 57.83279 v 18.97639 18.97638 l -32.98276,0.008 c -40.83653,0.01 -73.64642,1.80621 -73.64642,4.03143 0,3.94196 35.7063,45.58081 56.27493,65.62487 23.07124,22.48289 39.40851,36.16264 58.93881,49.3515 6.2125,4.19533 11.29546,8.05828 11.29546,8.58442 0,0.52608 -6.2689,8.1567 -13.93087,16.95687 l -13.93086,16.00031 -5.49734,-3.80731 c -11.33229,-7.84844 -67.90628,-66.28843 -84.27712,-87.05686 l -17.00574,-21.57379 -0.47045,80.76211 -0.47041,80.76212 h -19.86141 -19.86141 z",style:{fill:e.color||t,fillOpacity:1,stroke:e.color||t,strokeWidth:1.80727434,strokeOpacity:1}}),r.a.createElement("path",{id:"path4660-5",d:"m 427.91638,366.05816 c 0,-61.03951 -0.37851,-71.38734 -2.61125,-71.38734 -1.43618,0 -10.99214,7.84714 -21.23546,17.43809 -49.46353,46.31328 -110.43267,84.34753 -181.28458,113.09037 -20.57671,8.34745 -18.77063,8.86811 -33.37541,-9.62153 -7.13396,-9.03159 -12.70756,-16.64122 -12.38581,-16.91033 0.32175,-0.26907 8.71774,-3.16602 18.65776,-6.43767 63.78903,-20.99537 135.01604,-61.36949 178.01652,-100.90642 l 9.94,-9.13936 -84.49006,-0.082 -84.49009,-0.082 v -18.97641 -18.97637 h 64.76981 c 35.62341,0 83.1999,-0.53637 105.72555,-1.19193 l 40.95575,-1.19192 V 230.5081 c 0,-6.14638 0.5316,-21.06222 1.18137,-33.14629 l 1.18137,-21.97104 h 20.50593 20.50591 v 33.14594 33.14591 l 42.01913,1.18813 c 23.11052,0.65347 71.50029,1.19 107.53283,1.19229 l 65.51369,0.005 v 18.97638 18.9764 h -86.74917 c -47.71205,0 -86.72555,0.60996 -86.69667,1.35546 0.0648,1.6751 22.95195,19.74665 41.36038,32.65798 40.14092,28.15412 93.94745,54.0634 145.64001,70.12953 10.93401,3.39831 21.03481,6.59534 22.4462,7.10452 1.89117,0.68225 0.88853,2.69243 -3.81162,7.64192 -3.5078,3.69389 -9.88364,11.44597 -14.16854,17.22688 -9.21887,12.43741 -6.28968,12.56217 -42.4188,-1.80662 -64.68446,-25.72542 -120.92686,-60.3124 -168.70974,-103.75016 -10.2883,-9.35273 -19.43762,-17.27604 -20.33184,-17.60738 -0.94573,-0.35041 -1.62586,29.3236 -1.62586,70.93554 v 71.5375 h -20.78365 -20.78366 z",style:{fill:e.color||t,fillOpacity:1,stroke:e.color||t,strokeWidth:1.80727434,strokeOpacity:1}})))},F=function(e){return r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 901.000000 902.000000",preserveAspectRatio:"xMidYMid meet"},r.a.createElement("g",{id:"layer2"},r.a.createElement("path",{id:"path895",d:"M 447.62543,812.13332 C 553.4104,664.11009 666.07571,588.42218 779.6849,480.07386 1010.578,249.18072 717.24493,-76.515318 447.62543,148.0144 221.24372,-58.489435 -114.76764,249.74024 115.56598,480.07386 225.23312,591.27002 395.21369,674.87447 447.62543,812.13332 Z"})))},B=function(){return r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 901.000000 902.000000",preserveAspectRatio:"xMidYMid meet"},r.a.createElement("g",{id:"layer2"},r.a.createElement("rect",{y:"103",x:"381.48322",height:"138.03357",width:"138.03357",id:"rect897"}),r.a.createElement("rect",{y:"381.98322",x:"381.48322",height:"138.03357",width:"138.03357",id:"rect897-6"}),r.a.createElement("rect",{y:"660",x:"381.48322",height:"138.03357",width:"138.03357",id:"rect897-3"})))},G=function(){return r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 901.000000 902.000000",preserveAspectRatio:"xMidYMid meet"},r.a.createElement("g",{id:"layer1"},r.a.createElement("path",{id:"path863",d:"M 373.27203,780.2468 44.025229,451 373.27203,121.7532",style:{strokeOpacity:1}}),r.a.createElement("path",{id:"path863-2",d:"M 598.99824,737.31783 312.68042,451 598.99824,164.68217",style:{strokeOpacity:.8}}),r.a.createElement("path",{id:"path863-2-8",d:"M 856.00413,707.59776 599.40638,451 856.00413,194.40224",style:{strokeOpacity:.6}})))},V=a(1),z=a.n(V),K=(a(157),a(158),function(e){return r.a.createElement("div",{className:"loader-mini",style:e.style}," ")}),Y=function(e){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader-after"},r.a.createElement(H,null)),r.a.createElement("div",{className:"loader-before"}))},q=function(e){var t=e.type,a=e.onClick,n=e.text,o=e.loading;switch(t){case"submit":return r.a.createElement("button",{id:"submit",className:z()({"submit-button":!0,"button-loading":o}),onClick:a},r.a.createElement("span",{className:"button-text"}," ",e.children," "),o&&r.a.createElement("span",{className:"button-loading"}," ",r.a.createElement(K,null)));case"signin":return r.a.createElement("button",{id:"signin",className:"sign-in-btn",onClick:a},n);case"signup":return r.a.createElement("button",{id:"signup",className:"sign-up-btn",onClick:a},n);case"delete":return r.a.createElement("button",{className:"delete-btn"}," Delete ");default:return r.a.createElement("button",{className:"submit-button",style:{background:"gray"}},"loading...")}},X=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).state={verify:!1,loading:!1,text:"Delete"},a.verifyDelete=a.verifyDelete.bind(Object(_.a)(a)),a.reset=a.reset.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"reset",value:function(){this.setState({verify:!1,loading:!1,text:"Delete"})}},{key:"verifyDelete",value:function(){this.state.verify?(this.setState({loading:!0,verify:!1,text:"Deleting.."}),this.props.onClick()):this.setState({verify:!0,text:"Are you sure?"})}},{key:"render",value:function(){var e=this.state,t=e.verify,a=e.text;return r.a.createElement("div",{tabIndex:"0",className:z()({"delete-btn":!0,"delete-btn-danger":t,"delete-btn-loading":this.state.loading}),onClick:this.verifyDelete,onBlur:this.reset}," ",r.a.createElement("p",null," ",a," "))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).onToggle=a.onToggle.bind(Object(_.a)(a)),a.setWrapper=a.setWrapper.bind(Object(_.a)(a)),a.setChildNode=a.setChildNode.bind(Object(_.a)(a)),a.handleClickOutisde=a.handleClickOutisde.bind(Object(_.a)(a)),a.state={show:!1},a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutisde)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutisde)}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"onHide",value:function(){this.setState({show:!1})}},{key:"onToggle",value:function(){this.setState({show:!this.state.show})}},{key:"setWrapper",value:function(e){this.node=e}},{key:"setChildNode",value:function(e){this.childNode=e}},{key:"handleClickOutisde",value:function(e){this.node&&!this.node.contains(e.target)&&this.onHide()}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.setWrapper,className:"dropdown"},r.a.createElement("div",{className:z()({"dropdown-button":!0,"dropdown-button-active":this.state.show}),onClick:this.onToggle}," ",r.a.createElement(B,null)," "),r.a.createElement("div",{ref:this.setChildNode,className:z()({"dropdown-menu":!0,"dropdown-show":this.state.show})},this.props.children))}}]),t}(n.Component),Z=function(e){return r.a.createElement("div",{className:"dropdown-item",onClick:e.onClick}," ",e.children," ")},Q=J,$=a(55),ee=a(56),te=a.n(ee);function ae(e){e?te.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete te.a.defaults.headers.common.Authorization}function ne(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new Promise(function r(o,i){te.a[e]("".concat("https://morikin-api.herokuapp.com/").concat(t),a).then(function(e){o(e.data)}).catch(function(e){n>2?function(e,t){var a={message:e.response?e.response.data.clientMessage:"Sorry, we couldn't connect you to our server! ",code:e.response?e.response.status:520};t(a)}(e,i):(n+=1,r(o,i))})})}var re=function(e,t){return{type:"ADD_ERROR",data:e,method:t}},oe=function(e,t,a){return{type:"ADD_POPUP_BUTTON",func:t,args:a,text:e}},ie=function(){return{type:"REMOVE_ERROR"}},se=function(){return{type:"POPUP_SHOW"}},le=function(){return{type:"POPUP_HIDE"}},ce=function(e,t,a){return{type:"UPDATE_LIKE_LIST",update:e,id:t,context:a}},ue=function(e,t,a){if(e&&e.isLast)return t(function(e){return{type:"LAST_MESSAGE",context:e}}(a))};var me=function(){return function(e,t){if(t().myProfile.auth.isLoggedIn)return ne("get","api/discover/users").then(function(t){e({type:"GET_DISCOVER_USERS",users:t})}).catch(function(t){e(re(t,"error"))})}},de=function(e){return function(t){return ne("get","api/user/".concat(e)).then(function(e){t({type:"LOAD_USER_FOLLOW",users:e}),t({type:"REMOVE_ERROR"})}).catch(function(e){t(re(e,"error"))})}},pe=function e(t){var a=Object($.a)(t,3),n=a[0],r=a[1],o=a[2];return function(t,a){var i=a().ui.context;return ne("post","api/user/".concat(n,"/follow")).then(function(e){"followList"===r?(t({type:"UPDATE_FOLLOW_LIST",update:e.following,id:o}),t({type:"REMOVE_ERROR"})):"likesList"===r?(t(ce(e.following,o,i)),t({type:"REMOVE_ERROR"})):(t(function(e,t){return{type:"UPDATE_USER_PROFILE",update:e,context:t}}(e,i)),t({type:"REMOVE_ERROR"}))}).catch(function(a){t(re(a,"error")),t(se()),t(oe("Retry?",e,[n,r,o]))})}},he=function(e){return{type:"SHOW_NEW_MESSAGE"}},fe=function(e){return{type:"ANIMATE_CLOSE",select:e}},ge=function(){return{type:"IS_LOADING"}},Ee=function(){return{type:"IS_LOADED"}},be=function(e){return{type:"EDIT_PROFILE_PAGE",page:e}},ve=function(e){return function(t){t(function(e){return{type:"SHOW_SIDEBAR",show:e}}(e))}},ye=function(e){return function(t){t(function(e){return{type:"HIDE_SIDEBAR",show:e}}(e))}},Oe=function(e,t){return function(a,n){t?(a(fe(t)),setTimeout(function(){a({type:"CLOSE_LIKES"})},400)):a(function e(t){return function(a,n){var r=n().ui.context;return ne("get","api/".concat(t)).then(function(e){a(function(e,t){return{type:"LOAD_MSG_LIKES",users:e,context:t}}(e,r)),a({type:"REMOVE_ERROR"})}).catch(function(n){a(re(n,e,[t]))})}}(e.url)).then(function(){a(function(e){return{type:"SHOW_LIKES",title:e.title||null,url:e.url||null,method:e.method}}(e))})}},we=function(){return function(e){e({type:"CLEAR_ALL"})}},ke=function(e){return function(t){t(function(e){return{type:"SET_CONTEXT",context:e}}(e))}},Ne=function(e){return function(t){t(fe(e)),setTimeout(function(){t({type:"CLOSE_FOLLOW"}),t(function(e){e({type:"CLEAR_FOLLOW"})})},400)}};var Ce=Object(l.b)(function(e){return{current:e.myProfile.auth.username}},{followUser:pe,sidebarShow:ve})(function(e){var t=function(){e.followUser(e.followType)},a=e.following?"unfollow":e.username===e.current?"profileEdit":"follow";if(e.current)return e.current&&r.a.createElement("div",{className:"follow-container"},function(a){switch(a){case"follow":return r.a.createElement("button",{className:"follow-button ".concat(e.extraClass&&e.extraClass),onClick:t}," Follow ");case"unfollow":return r.a.createElement("button",{className:"follow-button unfollow-button ".concat(e.extraClass&&e.extraClass),onClick:t},"unfollow ");case"profileEdit":return r.a.createElement(s.b,{to:"/editprofile",style:{width:"100%",margin:"auto"}},r.a.createElement("button",{className:"follow-button unfollow-button ".concat(e.extraClass&&e.extraClass),style:{width:"100%",fontSize:"70%"},onClick:function(){return e.sidebarShow(!0)}},"Edit Profile"));default:return r.a.createElement("button",{className:"follow-button unfollow-button",style:{background:"gray"}},"loading...")}}(a));return null}),Se=Object(l.b)(null,{popUpHide:Ne})(function(e){return r.a.createElement("div",{className:"".concat(e.className," ")},r.a.createElement(W,{username:e.username,profileImg:e.profileImgUrl,profileColor:e.profileColor}),r.a.createElement(s.b,{to:"/u/".concat(e.username),onClick:e.popUpHide},e.username),r.a.createElement(Ce,{username:e.username,current:e.currentUser.current,followType:[e.username,e.followType,e.itemNum],extraClass:"follow-btn-small",following:e.following,itemNum:e.itemNum}))});a(175);var je=Object(l.b)(function(e){return{follow:e.follow,current:e.myProfile.auth.username,ui:e.ui,context:e.ui.context,state:e}},{getFollowList:de,popUpHide:Ne,showLikesList:Oe})(function(e){var t,a,n=e.type,o=function(){"likes"===n?e.showLikesList(null,"likes"):"follow"===n&&e.popUpHide("follow")},i={likes:{list:e.context&&e.state[e.context].messages.likes},follow:{list:e.follow}};return a=i[n].list&&!i[n].list.length<1?i[n].list.map(function(t,a){var o;return r.a.createElement(Se,Object.assign({},t,{currentUser:e,followType:"".concat(n,"List"),className:z()((o={},Object(w.a)(o,"".concat(n,"-list-box"),!0),Object(w.a)(o,"list-box",!0),Object(w.a)(o,"list-exit",e.ui[n].animateOut),o)),itemNum:a,key:"".concat(a).concat(t.username)}))}):r.a.createElement("h3",{className:"likes-title"},"Uh-oh, there is nothing here yet! :("),r.a.createElement("div",{className:"follow"===n?"follow-list-container":"likes-area"},r.a.createElement("div",{onClick:o,className:"back-button back-button-reverse"}," ",r.a.createElement("div",{className:"back-icon back-icon-reverse"},r.a.createElement(G,null)," "),"  ",r.a.createElement("h3",{className:"likes-title"},e.ui[n].title)," "),r.a.createElement("div",{className:z()((t={},Object(w.a)(t,"".concat(n,"-list"),!0),Object(w.a)(t,"list-enter",!0),Object(w.a)(t,"list-exit",e.ui[n].animateOut),t))},a),r.a.createElement("div",{onClick:o,className:""}," "))});a(176);function xe(){var e=Math.floor(255*Math.random()),t=Math.floor(255*Math.random()),a=Math.floor(255*Math.random());return"rgb(".concat(e,", ").concat(t,", ").concat(a,")")}var Me=xe();var Re=Object(l.b)(function(e){return{ui:e.ui.likes}},{showLikesList:Oe})(function(e){var t,a=e.text,n=e.userId,o=e.createdAt,i=e.ownerCheck,l=e.removeMessage,c=e.loading,u=e.likedBy,m=e.likeMessage,d=e.isLiked,p=e.isDeleted,h=e._id,f=e.showLikesList,g=e.ui,E=e.context,b=e.isLoggedIn;return g.url&&(t=g.url.split("/")[1]),c?r.a.createElement("div",{className:z()({"ind-message":!0,"item-box":!0,"ind-message-on-delete":p}),style:{borderRight:"4px solid ".concat(Me)}},r.a.createElement(W,{loading:c}),r.a.createElement("div",{className:"message-loading-text"},"Loading")):r.a.createElement("div",{className:z()({"message-wrapper":!0,"ind-message-on-delete":!1})},r.a.createElement("div",{className:z()({"ind-message":!0,"item-box":!0,"ind-message-on-delete":p})},r.a.createElement(W,{username:n.username,profileImg:n.profileImgUrl,profileColor:n.profileColor,loading:c}),r.a.createElement("div",{className:"message-username"},r.a.createElement(s.b,{to:"/u/".concat(n.username)},n.displayName," ",r.a.createElement("span",{style:{color:"gray",fontSize:"0.7rem",padding:"0 0 0 3px"}}," @",n.username,"  "))),r.a.createElement("div",{className:"time"},r.a.createElement("span",null,r.a.createElement(A.a,{format:"YYYY/MM/DD"},o)),r.a.createElement("span",null," ",r.a.createElement(A.a,{format:"HH:mm"},o))),b&&r.a.createElement(Q,null,i&&r.a.createElement(Z,null," ",r.a.createElement(X,{type:"delete",onClick:l})),r.a.createElement(Z,{onClick:m}," ",r.a.createElement("p",null," Like"),"  ")),r.a.createElement("p",{className:"message-text"},a),r.a.createElement("div",{className:"message-likes"},b&&r.a.createElement("div",{onClick:m,className:z()({"like-button":!0,"like-button-true":d})},r.a.createElement(F,null)),r.a.createElement("button",{onClick:function(){return function(e){var a={method:"list",title:"Message likes",url:"message/".concat(e,"/likes")};!0===g.display&&t===h?f(null,"likes"):f(a)}(h)}},r.a.createElement("span",null," ",u," likes")," ")),r.a.createElement("div",{className:"color-message-border",style:{background:"".concat(n.profileColor?n.profileColor:xe()," ")}})),g.display&&function(){if(t===h)return r.a.createElement(je,{type:"likes",context:E})}())});a(177),a(178);var Le=Object(l.b)(function(e){return{animate:e.animate}})(function(e){var t=e.backAction,a=e.content;return r.a.createElement("div",{className:z()({"container-box":!0})},r.a.createElement("div",{onClick:function(){t()},className:"back-button"},r.a.createElement("div",{className:"back-icon back-icon-reverse"},r.a.createElement(G,null)," ")),a)}),_e=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).state={text:"",loading:!1,show:!1},a.handleChange=a.handleChange.bind(Object(_.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(_.a)(a)),a.characterCount=a.characterCount.bind(Object(_.a)(a)),a.letterCheck=a.letterCheck.bind(Object(_.a)(a)),a.goBack=a.goBack.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"characterCount",value:function(e){return 160-e.split("").length}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"goBack",value:function(){var e=this;this.setState({show:!1}),setTimeout(function(){return e.props.showNewMessage()},1e3)}},{key:"componentDidMount",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.text.length;t<161&&t>0?(this.props.postNewMessage(this.state.text),this.setState({text:"",loading:!0})):0===t&&this.setState({error:"Please write a message!"})}},{key:"letterCheck",value:function(e){return e<0?"red":"green"}},{key:"render",value:function(){var e=this.characterCount(this.state.text),t=r.a.createElement("div",{className:"new-inner-contents"},this.props.errors.message&&r.a.createElement("div",null,this.props.errors.message),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"new-message-form"},r.a.createElement("label",null,"Make a new Post"),r.a.createElement("textarea",{name:"text",className:"new-message-textarea",value:this.state.text,onChange:this.handleChange,placeholder:"Hi there",autoFocus:!0}),r.a.createElement("p",{style:{color:this.letterCheck(e)},className:"character-counter"},e),r.a.createElement(q,{type:"submit",loading:this.state.loading},r.a.createElement("span",{style:{width:"100%"}},"Post"))));return r.a.createElement("div",{className:z()({"new-message-box":!0,"show-message-box":this.state.show})},r.a.createElement(Le,{exit:null,exitReverse:null,backAction:this.goBack,content:t}))}}]),t}(n.Component);var Pe=Object(j.f)(Object(l.b)(function(e){return{errors:e.errors}},{postNewMessage:function e(t){return function(a,n){var r=n().ui.context;return ne("post","api/messages",{text:t}).then(function(e){a(function(e,t){return{type:"POST_MESSAGE",message:e,context:t}}(e,r)),a(he()),a({type:"REMOVE_ERROR"})}).catch(function(n){a(re(n,"error")),a(se()),a(oe("Retry?",e,[t]))})}},showNewMessage:he})(_e)),Ie=function(e){var t=e.messages,a=e.bottomClick;return t.loading?r.a.createElement("div",{className:"item-box page-change"}," ",r.a.createElement("h3",null," Loading ")," "):t.isLast||t.data.length<1?r.a.createElement("div",{className:"item-box page-change inactive"}," ",r.a.createElement("h3",null," Nothing to show! ")," "):r.a.createElement("div",{className:"item-box page-change page-change-active",onClick:a},r.a.createElement("h1",null,"  + ")," ")};var Ae=Object(l.b)(function(e){return{ui:e.ui,currentUser:e.myProfile.auth}},{removeMessage:function e(t,a){return function(n,r){var o=r().ui.context;return ne("put","api/messages/".concat(a,"/").concat(t,"/delete"),{isDeleted:!0}).then(function(){return n(function(e,t){return{type:"ANIMATE_REMOVE_MESSAGE",id:e,context:t}}(a,o))}).then(function(){return setTimeout(function(){n(function(e,t){return{type:"REMOVE_MESSAGE",id:e,context:t}}(a,o)),n({type:"REMOVE_ERROR"})},5e3)}).catch(function(r){n(re(r,"error")),n(oe("Retry?",e,[t,a])),n(se())})}},likeMessage:function e(t){return function(a,n){var r=n().ui.context;return ne("post","api/messages/".concat(t,"/like")).then(function(e){a(function(e,t){return{type:"LIKE_MESSAGE",message:e,context:t}}(e,r)),a({type:"REMOVE_ERROR"})}).catch(function(n){a(re(n,"error")),a(se()),a(oe("Retry?",e,[t]))})}}})(function(e){var t,a=e.messages,n=e.removeMessage,o=e.currentUser,i=e.likeMessage,s=e.ui;return t=a.data.map(function(t){return r.a.createElement(Re,Object.assign({},t,{key:t._id,removeMessage:n.bind(void 0,t.userId._id,t._id),likeMessage:i.bind(null,t._id),ownerCheck:o.userId===t.userId._id,animate:e.animate,isLoggedIn:o.isLoggedIn}))}),r.a.createElement("div",{className:z()({"message-container":!0,"message-container-no-auth":!o.isLoggedIn})},s.newMessage.display&&r.a.createElement(Pe,null),t,Ie(e))});a(179);var Ue=Object(j.f)(Object(l.b)(function(e){return{ui:e.ui.follow}},{popUpDisplay:function(e,t){return function(a){t?a({type:"CLOSE_FOLLOW"}):a(de(e.url)).then(function(){a(function(e){return{type:"SHOW_FOLLOW",title:e.title||null,url:e.url||null,method:e.method}}(e))})}},clearAllPopUps:we})(function(e){var t=e.text,a=e.data,n=e.classDefine,o=e.username,i=e.type,s=e.popUpDisplay,l=e.ui,c=e.history,u=e.clearAllPopUps;return r.a.createElement("div",{className:n},r.a.createElement("button",{onClick:function(){var e={method:"list",title:"".concat(i[0].toUpperCase()).concat(i.slice(1)),url:"user/".concat(o,"/").concat(i)};e.url===l.url?s(e,!0):"posts"===i?(u(),c.push("/u/".concat(o))):s(e)}},r.a.createElement("div",{className:"meta-number"},a),r.a.createElement("div",{className:""},t)))})),Te=function(e){var t=e.profile,a=t.messageCount,n=t.followerCount,o=t.followingCount,i=t.username;return r.a.createElement("div",{className:"user-meta"},r.a.createElement(Ue,{text:"Posts",type:"posts",data:a,username:i,classDefine:"user-meta-item"}),r.a.createElement(Ue,{type:"followers",text:"Followers",data:n,classDefine:"user-meta-item meta-mid",username:i}),r.a.createElement(Ue,{type:"following",text:"Following",data:o,classDefine:"user-meta-item",username:i}))};var De=Object(l.b)(function(e){return{ui:e.ui.follow,currentUser:e.myProfile.auth.username,isMobile:e.ui.isMobile}})(function(e){var t=e.currentUser,a=e.profile,n=e.ui,o=e.isMobile;if(a.loading||!a.user.username)return r.a.createElement("div",{className:"user-profile-container"},r.a.createElement("div",{className:"user-profile-small"},r.a.createElement(W,{loading:a.loading}),r.a.createElement("div",{className:"user-follow"},r.a.createElement("p",{style:{color:"gray",fontSize:"0.9rem",padding:"0 0 0 3px",textAlign:"right",margin:"0 0 5px 50px"}}," Loading  "))));var i=a.user,s=i.username,l=i.following,c=i.profileImgUrl,u=i.profileColor,m=i.description,d=i.displayName;return r.a.createElement("div",{className:"user-profile-container "},r.a.createElement("div",{className:"user-profile-small"},r.a.createElement(W,{username:s,profileImg:c,profileColor:u,loading:!1}),r.a.createElement("div",{className:"user-follow"},r.a.createElement("p",{className:"user-profile-username",style:{color:"gray",fontSize:"0.9rem",padding:"0 0 0 3px",textAlign:"right",margin:"0 0 5px"}}," @",s,"  "),r.a.createElement("h3",{className:"user-profile-display-name",style:{borderBottom:"2px solid ".concat(u),margin:"0"}},d),r.a.createElement("p",{className:z()({"profile-description":!0,hidden:n.display&&!o})},m),r.a.createElement(Ce,{username:s,current:t,followType:[s],following:l})),r.a.createElement(Te,{profile:a.user,username:s})),n.display&&r.a.createElement(je,{type:"follow"}))}),We=function(e){return r.a.createElement("div",{className:z()({"bottom-popup":!0,"bottom-popup-show":e.error.popup,"error-dialog":e.errorBool,"info-dialog":e.infoBool})},e.children)};var He=Object(l.b)(function(e){return{error:e.errors}},{retry:function(e,t){return e.apply(null,t)},popupHide:le})(function(e){var t="error"===e.error.method,a="info"===e.error.method;return r.a.createElement(We,{error:e.error,errorBool:t,infoBool:a},r.a.createElement("p",null,t&&"".concat(e.error.code," Error.")," "),r.a.createElement("p",null," ",e.error.message),"Retry?"===e.error.text&&r.a.createElement("p",{className:"error-btn",onClick:function(){return e.retry(e.error.func,e.error.args)}}," ",e.error.text," "),"Go Back"===e.error.text&&r.a.createElement("p",{className:"error-btn",onClick:function(){return e.goBack()}}," ",e.error.text," "),"Close"===e.error.text&&r.a.createElement("p",{className:"error-btn",onClick:e.popupHide}," ",e.error.text," "))}),Fe=function(e){var t=e.user;return r.a.createElement("div",{className:"discover-icons"},r.a.createElement(W,{username:t.username,profileImg:t.profileImgUrl,profileColor:t.profileColor,loading:!1}),r.a.createElement("div",{className:"discover-username"},r.a.createElement(s.b,{to:"/u/".concat(t.username)},r.a.createElement("span",{style:{color:t.profileColor,textAlign:"left",fontSize:"0.7rem",padding:"0 0 0 3px"}}," @",t.username,"  "))))};var Be=Object(l.b)(function(e){return{discover:e.discover.users}},{getDiscoverUsers:me})(function(e){var t=e.discover.map(function(e){return r.a.createElement(Fe,{key:"discover-".concat(e.username),user:e})});return r.a.createElement("div",{className:"discover-follow"},r.a.createElement("div",{className:"discover-titles"},"People you may know "),r.a.createElement("div",{className:"discover-follow-list"},t))}),Ge=(a(180),function(e){return r.a.createElement("div",{className:"discover-box"},r.a.createElement("h3",null," Discover"),r.a.createElement("div",null,r.a.createElement(Be,e)))}),Ve=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).urlData=a.props.match,a.paramsID=a.urlData.params.id,a.handleBottom=function(){var e=a.paramsID?a.paramsID:"",t=a.props.state[a.props.page].messages.data[a.props.state[a.props.page].messages.data.length-1];a.updateMessages(e,t._id)},a.getUserProfile=a.props.getUserProfile.bind(Object(_.a)(a)),a.updateMessages=a.props.updateMessages.bind(Object(_.a)(a)),a.handleBottom=a.handleBottom.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"componentWillMount",value:function(){var e=this;window.addEventListener("resize",function(){return e.props.resizeFunction(window.innerWidth)}),this.props.setContext(this.props.page)}},{key:"componentDidMount",value:function(){this.getUserProfile(this.props.fetcher),this.props.getDiscoverUsers()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.props,t=e.discover,a=e.loadingBool,n=e.page,o=e.currentUser,i=this.urlData.url,s=this.props.state[n].messages,l=this.props.state[n].profile;return this.props.isMobile&&"dashboard"===this.props.page?r.a.createElement("div",{className:"timeline-container"},a&&r.a.createElement(ze,{isMobile:this.props.isMobile}),r.a.createElement(Ae,{key:"messages ".concat(i),messages:s,bottomClick:this.handleBottom}),r.a.createElement(He,{goBack:this.props.history.goBack})):r.a.createElement("div",{className:"timeline-container"},a&&r.a.createElement(ze,{isMobile:this.props.isMobile}),o&&r.a.createElement(De,{key:"user ".concat(this.props.state[n].username),profile:l}),r.a.createElement(Ae,{key:"messages ".concat(i),bottomClick:this.handleBottom,messages:s}),r.a.createElement(He,{goBack:this.props.history.goBack}),!this.props.isMobile&&o.isLoggedIn&&r.a.createElement(Ge,{users:t.users}))}}]),t}(n.Component),ze=function(e){return r.a.createElement("div",{className:"loading",style:{background:e.isMobile?"#fdfdfd":"#fdfdfdcc"}},r.a.createElement(Y,null))};var Ke=Object(j.f)(Object(l.b)(function(e){return{profile:e.userProfile,messages:e.messages,currentUser:e.myProfile.auth,discover:e.discover,loadingBool:e.ui.loading,isMobile:e.ui.isMobile,state:e}},{getUserProfile:function e(t){return function(a,n){var r=n(),o=r.myProfile,i=r.ui.context,s=o.auth.username,l={dashboard:{messages:"api/messages/",profile:"api/user/".concat(s)},profile:{messages:"api/user/".concat(t,"/messages/"),profile:"api/user/".concat(t)},myProfile:{messages:"api/user/".concat(s,"/messages/"),profile:"api/user/".concat(s)}};(n()[i].messages.data.length<1||"profile"===i&&n().profile.profile.username!==t)&&(a(ge()),Promise.all([ne("get",l[i].messages),ne("get",l[i].profile)]).then(function(e){a(function(e,t){return{type:"LOAD_MESSAGES",messages:e,context:t}}(e[0],i)),ue(e[0][e[0].length-1],a,i),a(function(e,t){return{type:"LOAD_USER_PROFILE",user:e,context:t}}(e[1],i)),a({type:"REMOVE_ERROR"}),a(le()),a(Ee())}).catch(function(n){a(se()),a(re(n,"error")),404===n.code?a(oe("Go Back")):a(oe("Retry?",e,[t])),a(Ee())}))}},followUser:pe,updateMessages:function e(t,a){return function(n,r){var o=r().ui.context;return ne("get",t?"api/user/".concat(t,"/messages/?from=").concat(a):"api/messages/?from=".concat(a)).then(function(e){n(function(e,t){return{type:"UPDATE_MESSAGES",messages:e,context:t}}(e,o)),ue(e[e.length-1],n,o),n({type:"REMOVE_ERROR"})}).catch(function(r){n(re(r,"error")),n(se()),n(oe("Retry?",e,[t,a]))})}},getDiscoverUsers:me,clearAllPopUps:we,resizeFunction:function(e){return function(t){t({type:"WINDOW_RESIZE",size:e<=500})}},setContext:ke})(Ve));var Ye=Object(j.f)(Object(l.b)(function(e){return{currentUser:e.myProfile.auth,errors:e.errors,isMobile:e.ui.isMobile,context:e.ui.context,profileHide:e.animate.profileHide,loading:e.ui.isLoading}},{setContext:ke})(function(e){var t={dashboard:null,profile:e.match.params.id,myProfile:e.currentUser.username};return r.a.createElement("div",{className:z()({"body-container":!0,"animation-test":e.profileHide})},r.a.createElement(Ke,{key:"timeline:".concat(e.match.url),page:e.page,fetcher:t[e.page]}))})),qe=a(28),Xe=a.n(qe),Je=function(e){var t=function(t){e.history.push("/".concat(t))};return e.isMobile?r.a.createElement("div",{className:"tab-nav"},r.a.createElement("div",{className:z()({"tab-item":!0,"icon-current":("dashboard"===e.context||"profile"===e.context)&&"/"===e.history.location.pathname}),onClick:function(){return t("")}},r.a.createElement(Xe.a,{name:"home",className:"icon"})),r.a.createElement("div",{className:z()({"tab-item":!0,"icon-current":"/new"===e.history.location.pathname}),onClick:function(){return t("new")}},r.a.createElement(Xe.a,{name:"pencil-alt",className:"icon"})),r.a.createElement("div",{className:z()({"tab-item":!0,"icon-current":"/discover"===e.history.location.pathname}),onClick:function(){return t("discover")}},r.a.createElement(Xe.a,{name:"dice",className:"icon"})),r.a.createElement("div",{className:z()({"tab-item":!0,"icon-current":"myProfile"===e.context&&"/myprofile"===e.history.location.pathname}),onClick:function(){return t("myprofile")}},r.a.createElement(Xe.a,{name:"user",className:"icon"}))):null};a(182),a(183);var Ze=Object(l.b)(function(e){return{currentUser:e.myProfile.auth,isMobile:e.ui.isMobile,context:e.ui.context,profile:e.profile.profile.user,isLoading:e.ui.isLoading}},{showNewMessage:he,animateProfile:function(){return{type:"ANIMATE_PROFILE"}},sidebarShow:ve})(function(e){var t=e.history,a=e.currentUser,n=e.context,o=function(){e.sidebarShow()};return e.isMobile?r.a.createElement("nav",null,a.isLoggedIn&&r.a.createElement("div",{className:z()({hamburger:!0,"shift-hamburger":"profile"===n}),onClick:o}," ",r.a.createElement("div",{className:"hamburger-line"})),r.a.createElement("div",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},className:"nav-logo"},r.a.createElement(H,null)," "),"profile"===n&&a.isLoggedIn&&r.a.createElement("div",{className:z()({"back-button":!0,transition:!0,"no-opacity":e.profileHide}),onClick:function(){e.animateProfile(),setTimeout(t.goBack,300),setTimeout(e.animateProfile,300)}}," ",r.a.createElement("div",{className:z()({"back-icon":!0,transition:!0,"no-opacity":e.profileHide})},r.a.createElement(G,null)," ")," "),"profile"===n&&a.isLoggedIn&&r.a.createElement("div",{className:z()({"profile-user-nav":!0,transition:!0,"no-opacity":e.profileHide})}," ",!e.isLoading&&e.profile.username," ")):r.a.createElement("nav",null,a.isLoggedIn&&r.a.createElement("div",{className:"hamburger",onClick:o}," ",r.a.createElement("div",{className:"hamburger-line"})),r.a.createElement("div",{onClick:function(){return e.history.push("/")},className:"nav-logo"}," ",r.a.createElement(H,null)," "),a.isLoggedIn&&r.a.createElement("button",{onClick:function(){var t={method:"postMessage"};"/"!==e.location.pathname&&(e.history.push("/"),setTimeout(function(){return e.showNewMessage(t)},200)),e.showNewMessage(t)},className:"nav-new-message"},r.a.createElement("span",null," New Post "),r.a.createElement(Xe.a,{name:"pencil-alt",className:"nav-icon"}),"  "),r.a.createElement(s.c,{to:"/myprofile",className:"nav-username"}," ",r.a.createElement("li",null,a.username," ")),!a.isLoggedIn&&r.a.createElement(s.c,{to:"/signin",className:"nav-signin"}," ",r.a.createElement("li",null,"Sign in")),!a.isLoggedIn&&r.a.createElement(s.c,{to:"/signup",className:"nav-signup"}," ",r.a.createElement("li",null,"Sign up")))}),Qe=(a(184),a(185),function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).handleChange=function(e){a.props.onChange(a.state.name,e.target.value)},a.placeHolderMovement=function(){return!!(a.props.value&&a.props.value.length>0)},a.handleFocus=function(e){e.preventDefault(),a.setState({active:!0,placeholderFloat:!0,error:!1})},a.requirementTest=function(){a.props.value<1&&a.props.isRequired?a.setState({error:!0}):a.setState({error:!1})},a.handleBlur=function(e){e.preventDefault(),a.setState({active:!1}),a.requirementTest()},a.state={active:!1,placeholderFloat:!1,error:!1,name:a.props.name},a.placeHolderMovement=a.placeHolderMovement.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"componentWillMount",value:function(){this.setState({placeholderFloat:this.placeHolderMovement()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.name,o=t.placeholder,i=t.options;return"dropdown"===a?r.a.createElement("div",{className:"input-container"},r.a.createElement("p",{className:z()({"input-placeholder":!0,"input-placeholder-active":!0,"input-placeholder-default":!e.state.placeholderFloat,"input-placeholder-error":e.state.error})},o),r.a.createElement("select",{className:z()({"input-box":!0,"input-error":e.state.error}),style:e.state.error?{boxShadow:"0 2px 0px 0px #FF0000"}:{boxShadow:"0 1px 0px 0px gray"},type:a,name:n,placeholder:"",value:e.props.value,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange,autoFocus:e.props.autoFocus},i.map(function(e){return r.a.createElement("option",{key:e,value:e}," ",e," ")})),r.a.createElement("div",{style:{background:e.props.color},className:z()({"input-hr-holder":!0,"input-hr-holder-active":!0})},r.a.createElement("hr",{className:z()({"input-hr":!0,"hr-active":!1})}))):r.a.createElement("div",{className:"input-container"},r.a.createElement("p",{className:z()({"input-placeholder":!0,"input-placeholder-active":e.state.placeholderFloat,"input-placeholder-default":!e.state.placeholderFloat,"input-placeholder-error":e.state.error})},o," ",e.state.error&&r.a.createElement("span",null," is required ")),r.a.createElement("input",{className:z()({"input-box":!0,"input-error":e.state.error}),style:e.state.error?{boxShadow:"0 2px 0px 0px #FF0000"}:{boxShadow:"0 1px 0px 0px gray"},type:a,name:n,placeholder:"",value:e.props.value,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange,autoFocus:e.props.autoFocus}),r.a.createElement("div",{className:z()({"input-hr-holder":!0,"input-hr-holder-active":e.state.active})},r.a.createElement("hr",{className:z()({"input-hr":!0,"hr-active":e.state.active})})))}}]),t}(n.Component)),$e=function(e){function t(e){var a;Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.handleSubmit=function(e){e.preventDefault(),a.props.editProfile(a.state,a.redirect)},a.redirect=function(){a.props.sidebarHide(),a.props.history.push("/")},a.handleFocus=function(e){e.preventDefault()},a.handlePageChange=function(e){a.setState({page:e})},a.title=function(){switch(a.props.editPage){case"info":return"Edit your Personal Information";case"customisation":return"Make your profile yours";case"security":return"Want to change your email address?";case"password":return"Change your password";default:return"Edit profile"}};var n=a.props.user;return a.state={username:n.username||"",email:n.email||"",profileImgUrl:n.profileImgUrl||"",displayName:n.displayName||"",passwordOne:"",passwordTwo:"",profileColor:n.profileColor||"",description:n.description||""},a.handlePageChange=a.handlePageChange.bind(Object(_.a)(a)),a.handleChange=a.handleChange.bind(Object(_.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.email,o=t.displayName,i=t.profileImgUrl,s=t.profileColor,l=t.description,c=t.passwordOne,u=t.passwordTwo,m=this.props,d=m.errors,p=m.editPage;return r.a.createElement("div",{className:"fullscreen"},r.a.createElement("h3",null," ",this.title()," "),r.a.createElement("div",{className:"fullscreen",onClick:function(){e.redirect()}}),r.a.createElement("form",{className:"edit-profile-form",onSubmit:this.handleSubmit},d.message&&r.a.createElement("div",null," ",d.message," "),"info"===p&&r.a.createElement(Qe,{type:"text",name:"username",placeholder:"Username",value:a,onChange:this.handleChange}),"customisation"===p&&r.a.createElement(Qe,{type:"text",name:"displayName",placeholder:"Display Name",value:o,onChange:this.handleChange}),"info"===p&&r.a.createElement(Qe,{type:"text",name:"description",placeholder:"Profile Description",value:l,onChange:this.handleChange}),"security"===p&&r.a.createElement(Qe,{type:"text",name:"email",placeholder:"Email Address",value:n,onChange:this.handleChange}),"password"===p&&r.a.createElement(Qe,{type:"password",name:"passwordOne",placeholder:"Password",value:c,onChange:this.handleChange}),"password"===p&&r.a.createElement(Qe,{type:"password",name:"passwordTwo",placeholder:"Repeat your password",value:u,onChange:this.handleChange}),"customisation"===p&&r.a.createElement(Qe,{type:"text",name:"profileImgUrl",placeholder:"URL of your Profile Image",value:i,onChange:this.handleChange}),"customisation"===p&&r.a.createElement(Qe,{type:"dropdown",options:["Teal","Olive","Purple","Green","Orange"],color:this.state.profileColor,name:"profileColor",placeholder:"Profile Color",value:s,onChange:this.handleChange}),r.a.createElement("button",{className:"submit-button"}," submit  ")))}}]),t}(n.Component);var et=Object(l.b)(function(e){return{user:e.myProfile.auth,isLoggedIn:e.myProfile.auth.isLoggedIn,errors:e.errors,editPage:e.ui.editProfilePage}},{editProfile:function e(t,a){return function(n,r){return r().ui.context,ne("post","api/user/updateprofile",{userData:t}).then(function(e){localStorage.setItem("jwtToken",e.token),n({type:"UPDATE_CURRENT_USER",user:e.response}),n({type:"REMOVE_ERROR"})}).then(function(){a()}).catch(function(r){n(re(r,"error")),n(se()),n(oe("Retry?",e,[t,a]))})}},sidebarHide:ye})($e);function tt(e){var t=function(t){function a(){return Object(x.a)(this,a),Object(R.a)(this,Object(L.a)(a).apply(this,arguments))}return Object(P.a)(a,t),Object(M.a)(a,[{key:"componentWillMount",value:function(){this.props.isAuthenticated||this.props.history.push("/signin")}},{key:"componentWillUpdate",value:function(){this.props.isAuthenticated||this.props.history.push("/signin")}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(n.Component);return Object(l.b)(function(e){return{isAuthenticated:e.myProfile.auth.isLoggedIn}})(t)}function at(e){var t=function(t){function a(){return Object(x.a)(this,a),Object(R.a)(this,Object(L.a)(a).apply(this,arguments))}return Object(P.a)(a,t),Object(M.a)(a,[{key:"componentDidMount",value:function(){this.props.getDiscoverUsers()}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(n.Component);return Object(l.b)(null,{getDiscoverUsers:me})(t)}a(186);var nt=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(w.a)({},e,t)),a.props.removeError()},a.handleSubmit=function(e){e.preventDefault(),a.props.removeError();var t=a.props.signUp?"signup":"signin";a.props.signUp&&a.state.password!==a.state.repeatPassword?a.props.addError({statusText:"The passwords do not match!"}):(a.props.onAuth(t,a.state),a.setState({password:"",repeatPassword:"",profileImgUrl:""}))},a.state={username:"",password:"",repeatPassword:"",profileImgUrl:"",loading:!1},a.handleChange=a.handleChange.bind(Object(_.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"componentWillMount",value:function(){this.props.errors.message&&this.setState({loading:!1})}},{key:"componentWillUnmount",value:function(){this.props.history.push("/")}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.profileImgUrl,o=e.repeatPassword,i=this.props,s=i.heading,l=i.buttonText,c=i.signUp,u=i.errors,m=i.loading,d=i.isMobile;return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("p",{className:"title"},u.message?r.a.createElement("span",{className:"login-error"},u.message):s),r.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},r.a.createElement(Qe,{ref:"username",type:"text",name:"username",placeholder:"Username",value:t,onChange:this.handleChange,isRequired:!0,autoFocus:!d,autocomplete:"off"}),r.a.createElement(Qe,{type:"password",name:"password",placeholder:"Password",value:a,isRequired:!0,onChange:this.handleChange}),c&&r.a.createElement(Qe,{type:"password",name:"repeatPassword",placeholder:"Repeat your Password",value:o,isRequired:!0,onChange:this.handleChange}),c&&r.a.createElement(Qe,{type:"text",name:"profileImgUrl",placeholder:"Url of your Profile Picture (optional)",value:n,onChange:this.handleChange}),r.a.createElement(q,{type:"submit",text:l,loading:m},l)))}}]),t}(n.Component);var rt=Object(l.b)(function(e){return{errors:e.errors,isLoggedIn:e.myProfile.auth.isLoggedIn,loading:e.ui.loading,isMobile:e.ui.isMobile}},{removeError:ie,addError:re})(nt),ot=a(80);function it(e){return{type:m,user:e}}function st(e){ae(e)}a(187);var lt=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).handleClick=function(e){a.setState({page:e}),a.props.removeError()},a.authThenRedirect=function(){var e;(e=a.props).authUser.apply(e,arguments).then(function(){})},a.state={page:"default"},a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"componentWillMount",value:function(){this.props.locationState&&this.setState({page:this.props.locationState}),this.props.isLoggedIn&&this.props.history.push("/"),setTimeout(function(){return window.scrollTo(0,0)},100)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.errors;return r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/",render:function(n){return r.a.createElement("div",{className:z()({"landing-page":!0,"login-form-show":"signup"===e.state.page||"signin"===e.state.page})},r.a.createElement("div",{className:"landing-logo",onClick:function(){return e.setState({page:"default"})}},r.a.createElement(H,{color:"#3e3e3e"})),r.a.createElement("div",{className:"top-left"},r.a.createElement("div",{className:"device white-box-style"},"signup"===e.state.page&&r.a.createElement(rt,Object.assign({errors:t,onAuth:e.authThenRedirect,signUp:!0,buttonText:"Sign Up!",heading:"Join today!",backAction:e.handleClick.bind(e,"/","back")},n)),"signin"===e.state.page&&r.a.createElement(rt,Object.assign({errors:t,onAuth:e.authThenRedirect},n,{buttonText:"Log in",heading:"Welcome!",backAction:e.handleClick.bind(e,"/","back")})),"default"===e.state.page&&r.a.createElement("img",{alt:"",src:a(188)}))),r.a.createElement("div",{className:"top-right"},r.a.createElement("h2",null,"Welcome to Morikin "),r.a.createElement("p",null,"Message. Share. Discover."),r.a.createElement("div",{className:"landing-buttons"},r.a.createElement("button",{onClick:function(){return e.handleClick("signin")},className:z()({"sign-in-btn":!0,"auth-btn-active":"signin"===e.state.page})},"Sign In"),r.a.createElement("button",{onClick:function(){return e.handleClick("signup")},className:z()({"sign-up-btn":!0,"auth-btn-active":"signup"===e.state.page})},"Sign Up"))),r.a.createElement("div",{className:"bottom-content"},r.a.createElement("div",{className:"bottom-item"},r.a.createElement("div",{className:"icon-holder"},r.a.createElement(Xe.a,{name:"comment",className:"icon landing-icon"})),r.a.createElement("h4",null,"Message ")),r.a.createElement("div",{className:"bottom-item"},r.a.createElement("div",{className:"icon-holder"},r.a.createElement(Xe.a,{name:"users",className:"icon landing-icon"})),r.a.createElement("h4",null," Share ")),r.a.createElement("div",{className:"bottom-item"},r.a.createElement("div",{className:"icon-holder"},r.a.createElement(Xe.a,{name:"dice",className:"icon landing-icon"})),r.a.createElement("h4",null," Discover "))))}}))}}]),t}(n.Component);var ct=Object(l.b)(function(e){return{errors:e.errors,isLoggedIn:e.myProfile.auth.isLoggedIn}},{authUser:function(e,t){return function(a){return new Promise(function(n,r){return a(ge()),ne("post","api/auth/".concat(e),t).then(function(e){var t=e.token,n=Object(ot.a)(e,["token"]);return a(Ee()),localStorage.setItem("jwtToken",t),Object(u.a)({token:t},n)}).then(function(e){var t=e.token,r=Object(ot.a)(e,["token"]);setTimeout(function(){st(t),a(it(r)),a(se()),a(re({message:"Welcome"},"info")),a(oe("Close",le)),n()},500)}).catch(function(e){a(re(e)),a(Ee()),r()})})}},removeError:ie})(lt),ut=(a(189),function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(R.a)(this,Object(L.a)(t).call(this,e))).handlePageChange=function(e,t,n){a.setState({page:e}),a.props.editProfilePageChange(e),a.props.history.location.pathname!==t&&a.props.history.push(t),n&&a.handleSidebarHide(),a.props.isMobile&&a.props.sidebarHide()},a.handleSidebarHide=function(){a.props.sidebarHide(),"/editprofile"===a.props.history.location.pathname&&a.props.history.push("/"),a.setState({page:"default"})},a.setWrapperRef=function(e){a.wrapperRef=e},a.state={page:"default"},a.handlePageChange=a.handlePageChange.bind(Object(_.a)(a)),a.handleSidebarHide=a.handleSidebarHide.bind(Object(_.a)(a)),a.setWrapperRef=a.setWrapperRef.bind(Object(_.a)(a)),a.handleClickOutisde=a.handleClickOutisde.bind(Object(_.a)(a)),a}return Object(P.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.isMobile&&document.addEventListener("mousedown",this.handleClickOutisde)}},{key:"componentWillUnmount",value:function(){this.props.isMobile&&document.removeEventListener("mousedown",this.handleClickOutisde)}},{key:"handleClickOutisde",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.props.sidebarHide()}},{key:"render",value:function(){var e=this,t=this.props,a=t.sidebarVisibility,n=t.logout,o=this.state.page;return r.a.createElement("div",{ref:this.setWrapperRef,className:z()({"sidebar-main":!0,"sidebar-show":a})},r.a.createElement("div",{onClick:this.handleSidebarHide,className:"exit-sidebar"},"  "),r.a.createElement("ul",{className:"sidebar-menu"},r.a.createElement("li",{className:z()({active:"/"===this.props.history.location.pathname}),onClick:function(){return e.handlePageChange("default","/",!0)}},"Home"),r.a.createElement("li",{className:z()({active:"/myprofile"===this.props.history.location.pathname}),onClick:function(){return e.handlePageChange("info","/myprofile",!0)}},"My Profile"),r.a.createElement("li",{className:z()({active:"/editprofile"===this.props.history.location.pathname&&"info"===o}),onClick:function(){return e.handlePageChange("info","/editprofile")}},"Personal Info"),r.a.createElement("li",{className:z()({active:"/editprofile"===this.props.history.location.pathname&&"security"===o}),onClick:function(){return e.handlePageChange("security","/editprofile")}},"Security"),r.a.createElement("li",{className:z()({active:"/editprofile"===this.props.history.location.pathname&&"customisation"===o}),onClick:function(){return e.handlePageChange("customisation","/editprofile")}},"Customisation"),r.a.createElement("li",{onClick:function(){return n()}},"Logout")))}}]),t}(n.Component));var mt=Object(l.b)(function(e){return{user:e.myProfile.auth,sidebarVisibility:e.ui.sidebarShow}},{sidebarShow:ve,sidebarHide:ye,logout:function(){return function(e){localStorage.removeItem("jwtToken"),st(!1),e({type:"USER_LOGOUT"})}},editProfilePageChange:be})(ut);var dt=Object(j.f)(Object(l.b)(function(e){return{currentUser:e.myProfile.auth,errors:e.errors,isMobile:e.ui.isMobile,context:e.ui.context,sidebarShow:e.ui.sidebarShow}})(function(e){var t=e.currentUser;return t.isLoggedIn?r.a.createElement("div",{className:"container"},r.a.createElement(Ze,{history:e.history,location:e.location,match:e.match}),r.a.createElement(mt,{history:e.history,isMobile:e.isMobile,user:e.currentUser}),r.a.createElement(j.a,{exact:!0,path:"/editprofile",component:tt(et)}),r.a.createElement(j.c,null,r.a.createElement(j.a,{exact:!0,path:"/new",component:tt(Pe)}),r.a.createElement(j.a,{exact:!0,path:"/discover",component:at(Ge)}),r.a.createElement(j.a,{exact:!0,path:"/signin",render:function(e){return r.a.createElement(ct,e)}})," ",r.a.createElement(j.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(ct,e)}}),r.a.createElement(j.a,{path:"/myprofile",render:function(e){return r.a.createElement(Ye,{page:"myProfile",user:t.username})}}),r.a.createElement(j.a,{path:"/u/:id/",render:function(e){return r.a.createElement(Ye,{page:"profile"})}}),r.a.createElement(j.a,{path:"/",render:function(e){return r.a.createElement(Ye,{page:"dashboard"})}})),r.a.createElement(Je,{history:e.history,currentUser:t.username,isMobile:e.isMobile,context:e.context})):r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/u/:id/",render:function(e){return r.a.createElement("div",{className:"container"}," ",r.a.createElement(Ze,{history:e.history,location:e.location,match:e.match}),r.a.createElement(Ye,{page:"profile"}))}}),r.a.createElement(j.a,{exact:!0,path:"/signin",render:function(e){return r.a.createElement(ct,Object.assign({locationState:"signin"},e))}}),r.a.createElement(j.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(ct,Object.assign({locationState:"signup"},e))}}),r.a.createElement(j.a,{path:"/",render:function(e){return r.a.createElement(ct,e)}}))})),pt=(a(190),a(136)),ht=a.n(pt),ft=Object(c.e)(C,Object(c.d)(Object(c.a)(S.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));if(localStorage.jwtToken){st(localStorage.jwtToken);try{ft.dispatch(it(ht.a.decode(localStorage.jwtToken)))}catch(vt){ft.dispatch(it({}))}}var gt=function(){return r.a.createElement(l.a,{store:ft},r.a.createElement(s.a,null,r.a.createElement(dt,null)))},Et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function bt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(gt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("https://anthonyashurst.com/morikin",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("https://anthonyashurst.com/morikin","/service-worker.js");Et?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):bt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):bt(e)})}}()},82:function(e,t,a){e.exports=a.p+"static/media/logo.b6931a33.svg"}},[[137,1,2]]]);
//# sourceMappingURL=main.f77896b8.chunk.js.map